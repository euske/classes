<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../common.css">
<title>2021年度 One Day School (人工知能) / ご案内
</title>
<style><!--
--></style>
</head>
<body>
<div class=nav>
<a href="https://www.sss.e.titech.ac.jp/">&lt; 超スマート社会推進コンソーシアム</a>
</div>

<h1>2021年度 One Day School (人工知能) / 事前準備のご案内</h1>
<div class=date>2021年11月8日</div>

<strong>概要:</strong>
このページでは、2021年度の超スマート社会推進コンソーシアム
One Day School (人工知能) に参加される方々に向けて、
事前にご準備いただく内容をご案内しています。

<ol>
<li> <a href="#python-setup">Python 環境のセットアップ</a>
<ul>
  <li> <a href="#python-colab">クラウド環境を使う場合</a>
  <li> <a href="#python-anaconda">自分の PC にインストールして使う場合</a>
  <li> <a href="#python-torch">GPU が利用可能かどうか確認する</a>
</ul>
<li> <a href="#matplotlib-plot">最初の Python プログラム</a>
<ul>
  <li> <a href="#matplotlib-export">グラフを画像ファイルとして保存する</a>
  <li> <a href="#matplotlib-import">自作のデータを使ってグラフを描画</a>
</ul>
</ol>


<h2 id="python-setup">1. Python 環境のセットアップ</h2>

<ul>
<li> 本講座では、プログラミング言語 Python を使用します。
<li> お持ちの PC で Python を使用するには、以下の 2通りの方法があります:
  <ol type=a>
    <li> クラウド環境 (<a target="_blank" href="https://colab.research.google.com/">Google Colaboratory</a>) を使う。<strong>(推奨)</strong>
    <li> 自分の PC にインストールして使う。
  </ol>
</ul>

<h3 id="python-colab">1.1. クラウド環境を使う場合</h3>
<ol>
  <li> まず <a href="https://myaccount.google.com/">Google アカウントを作成</a>してください。
    (まだお持ちでない方のみ)
  <li> <a target="_blank" href="https://colab.research.google.com/">Google Colaboratory</a> (通称Colab) にログインします。
  <li> <kbd>File</kbd> メニューから <kbd>New Notebook</kbd> を選びます。
  <li> <kbd>Runtime</kbd> メニューから <kbd>Change runtime type</kbd> を選び、
    「Hardware accelerator」の欄で <kbd>GPU</kbd> を選択します。
    <div class=figure><img width="409" height="283" src="colab_runtime.png"></div>
  <li> 以下のような画面が表示されますので、この枠内にプログラムを入力します。
    <div class=figure><img width="791" height="361" src="colab_screen.png"></div>
</ol>

<h3 id="python-anaconda">1.2. 自分の PC にインストールして使う場合 (Nvidia製GPU + 6GBのディスク空き容量が必要)</h3>
<ol>
  <li> 本講座では GPU の機能を利用しますので、
    <mark>Nvidia製GPU</mark> と
    <mark>18GB程度のディスク空き容量</mark> をもった PC が必要になります。
  <li> まず
      <a target="_blank" href="https://www.anaconda.com/products/individual">Anaconda システム</a>
      をダウンロードしてインストールします。
  <li> <kbd>Anaconda Prompt</kbd> を起動し、以下のように入力します:
<pre>
(base) C:\Users\euske&gt;<strong>conda install -c pytorch pytorch</strong>
Collecting package metadata (current_repodata.json): done
Solving environment: done

...
Proceed ([y]/n)? <strong>y</strong>
...
Preparing transaction: done
Verifying transaction: done
Executing transaction: done
</pre>
  <li> <kbd>Jupyter Notebook</kbd> を起動します。
  <li> <kbd>New Notebook (Python3)</kbd> を選びます。
  <li> 以下のような画面が表示されますので、この枠内にプログラムを入力します。
    <div class=figure><img width="810" height="265" src="jupyter_screen.png"></div>
</ol>

<h3 id="python-torch">1.3. GPU が利用可能かどうか確認する</h3>
<p>
GPU の機能が利用可能かどうかは、以下のようにして確認できます。
Google Colaboratory あるいは Jupyter Notebook で、以下のように入力し、実行します:
<blockquote><pre>
import torch
torch.cuda.is_available()
</pre></blockquote>
<p>
GPU が正常に動作している場合、「<code>True</code>」が表示されます。
<div class=figure><img width="279" height="107" src="colab_cuda.png"></div>

<h2 id="matplotlib-plot">2. 最初の Python プログラム</h2>

<p>
Google Colaboratory (あるいは Jupyter Notebook) で
以下のプログラムを入力 (コピー・ペースト) し、
<kbd>再生</kbd> (あるいは <kbd>Run</kbd>) ボタンを押して実行してみてください。
(キーボードの <kbd>Ctrl</kbd> + <kbd>Enter</kbd> でも実行できます。)

<blockquote><pre>
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 10, 100)

plt.plot(x, np.sin(x), label="sin(x)")

plt.xlabel("x label")
plt.ylabel("y label")
plt.title("Simple Plot")
plt.legend()
plt.show()
</pre></blockquote>

<p>
正しく動作していれば、以下のような画面が表示されます:
<div class=figure><img width="770" height="701" src="colab_sinx.png"></div>
</div>

<h3 id="matplotlib-export">2.1. グラフを画像ファイルとして保存する</h3>
<p>
上のプログラムに以下の一行を追加すると、
描画したグラフを実際にファイルとして保存 (ダウンロード) することができます。
<blockquote><pre>
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 10, 100)

plt.plot(x, np.sin(x), label="sin(x)")

plt.xlabel("x label")
plt.ylabel("y label")
plt.title("Simple Plot")
plt.legend()
<mark>plt.savefig("sinx.png")</mark>
plt.show()
</pre></blockquote>

<p>
<strong>注意</strong>:
<code>plt.savefig(...)</code> の部分は
必ず <code>plt.show()</code> の前に書いてください。

<h4>Google Colaboratory を使う場合</h4>
<p>
Google Colaboratory は、内部にファイルを持っています。
上のプログラムが正しく動作すると、
<code>sinx.png</code> ファイルが生成されます。
これを自分の PC にダウンロードするには、以下のようにします。
<ol>
<li> 画面の左側の「フォルダ」アイコンをクリックします。
<li> 初期化にしばらく時間がかかるので、10秒ほどお待ちください。
<li> <code>sinx.png</code> というファイルが表示されるので、
  右クリックして <kbd>Download</kbd> を選びます。
  <div class=figure><img width="524" height="719" src="colab_download.png"></div>
<li> ダウンロードしたファイルを PC 上に保存します。
</ol>

<h4>Jupyter Notebook を使う場合</h4>
<p>
Juypter Notebook では、
画像ファイルは自分のホームフォルダ内に保存されています。
フォルダを開いて <code>sinx.png</code> が生成されていることを確認します。
<p>
(なお、作成した Notebook 自体もホームフォルダ内に保存されています。)

<h3 id="matplotlib-import">2.2. 自作のデータを使ってグラフを描画</h3>
<p>
今度は逆に、自作のデータを使ってグラフを描画させてみます。

<ol class=spacy>
  <li> 以下のようなテキストファイルを作成し、
    これを <code>data1.txt</code> という名前で保存します:
<blockquote><pre>
1 10
2 40
3 25
4 100
5 60
</pre></blockquote>
  <li> <a target="_blank" href="https://colab.research.google.com/">Google Colab</a> を開き、
    このテキストファイルを画面左側の
    ファイル一覧部分にドラッグ・ドロップします。
    <br>
    (Jupyter Notebook を使っている場合は、ファイル <code>data1.txt</code> を
    ホームフォルダ (Notebookファイルが入っているフォルダ) の中に置きます。)
    <div class=figure><img width="350" height="254" src="colab_upload.png"></div>
  <li> 以下のプログラムを入力・実行します:
<blockquote><pre>
import numpy as np
import matplotlib.pyplot as plt

a = np.genfromtxt("./data1.txt")
plt.plot(a[:,0], a[:,1], label="data1", color="blue")

a = np.genfromtxt("./data1.txt")
plt.bar(a[:,0], a[:,1], label="data1", color="red")

plt.title("Simple Plot")
plt.xlabel("x label")
plt.ylabel("y label")
plt.legend()
plt.savefig("./plot1.png")
plt.show()
</pre></blockquote>
    正しく動いていれば、以下のようなグラフが表示されます:
    <div class=figure><img width="389" height="278" src="plot1.png"></div>
</ol>
</div>


<hr>
<address>
Yusuke Shinyama
</address>
